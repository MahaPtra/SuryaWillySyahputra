<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Auto-Play</title>
</head>
<body>
    <audio id="bg-music" src="bg.mp3" loop></audio>

    <script>
        let audio = document.getElementById("bg-music");

        // Cek apakah ini user baru atau lama
        let isUserNew = !localStorage.getItem("musicStatus");

        if (isUserNew || localStorage.getItem("musicStatus") === "playing") {
            audio.autoplay = true;
            audio.play().catch(() => {
                console.log("Autoplay diblokir, menunggu interaksi pengguna...");
            });
            localStorage.setItem("musicStatus", "playing");
        }

        // Sinkronisasi antar tab agar musik tetap berjalan
        window.addEventListener("storage", function (event) {
            if (event.key === "musicStatus") {
                if (event.newValue === "playing") {
                    audio.play();
                } else {
                    audio.pause();
                }
            }
        });
    </script>
</body>
</html>
